---
title: 闭包的相关知识
date: 2016-07-29 10:48:29
tags:
---
<h2>闭包的定义</h2>
闭包就是可以访问其他函数里的变量的一个函数。
<h2>创建闭包的方式</h2>
常见的方式为:在一个函数里创建另一个函数。
即使闭包函数被返回，它仍然可以访问到外部函数的变量。
因为内部函数的作用域中包含了外部函数的作用域。
<h2>函数的执行过程</h2>
在调用一个函数时，会创建一个执行环境和作用域链。
而在函数执行过程中，需要在作用域链中查找变量。每个函数都有一个变量对象。
全局环境的变量对象始终存在，而局部环境的而变量对象只在函数的执行过程中存在。
在创建一个内部函数时，会先创建一个包含全局环境的变量对象的作用域链，被保存在内部属性中，
当调用内部函数时，会为内部函数创建一个执行环境，通过复制刚才创建的全局变量对象的作用域链
构建执行环境的作用链。而作用域链就是指向变量对象的指针列表。一般来说，当内部函数执行完毕后，会销毁它的变量对象。而闭包有所不同。作用域链会被销毁，而变量对象仍然存在，只有当匿名函数被销毁后，匿名函数的外部函数的活动对象才会被销毁。因为匿名函数还在引用外部函数的变量。
<h2>闭包的2个特殊变量</h2>
1.this:指函数的执行环境，在全局作用域中使用它，它指向window;当它作为一个对象的方法使用时，指向这个对象。
2.arguements:函数形参的参数数组;
**注意:this,arguments只能访问到其活动对象，不会访问到外部函数的这两个变量。**如：
var name="john";
var obj={
	 name:"mike";
	 getname:function(){
	     return function(){
	     return this.name;
	 }
	}
}
//&nbsp;&nbsp;&nbsp;&nbsp;john;
<h2>闭包与变量</h2>
在闭包中访问外部函数的变量时，只能访问到外部函数的变量的最终结果;要始终注意这点，否则结果会很出乎意料，这种情况在循环中出现最多。
<h2>模仿块级作用域</h2>
在c,c++中存在块级作用域，而在js中不存在。但是使用闭包可以达到块级作用域的效果。
（function(){
//&nbsp;&nbsp;&nbsp;&nbsp;函数语句
}）();
第一个括号相当于函数表达式，第二个括号会立即执行这个函数。
<h2>内存泄漏</h2>
如果闭包的作用域链中存在一个HTML元素，该元素就无法被销毁。
